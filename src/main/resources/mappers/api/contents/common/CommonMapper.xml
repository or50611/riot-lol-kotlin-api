<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.springboot.riot.api.contents.common.mapper.CommonMapper">

	<select id="selectCommonMatchList" resultType="com.springboot.riot.api.contents.common.vo.CommonMatchVo">
		SELECT
			SM_INFO.ACCOUNT_ID
			, S_I.ACTIVITY_NM
			, S_I.ACTIVITY_KOR_NM
			, S_I.TEAM_SEQ
			, S_I.LANE
			, S_I.USER_NAME
			, SM_INFO.GAME_ID
			, SM_INFO.PLATFORM_ID
			, SM_INFO.CHAMPION
			, SM_INFO.QUEUE
			, SM_INFO.SEASON
			, ROUND(SM_INFO.TIME_STAMP / 1000) AS TIME_STAMP
			, SM_INFO.LANE
			, SM_INFO.ENEMY_CHAMPION
			, M_B.GAME_DURATION
			, MP_BASIC.SPELL1_ID
			, MP_BASIC.SPELL2_ID
			, MP_BASIC.TEAM_ID
			, MP_STATS.PARTICIPANT_ID
			, MP_STATS.WIN
			, MP_STATS.KILLS
			, MP_STATS.DEATHS
			, MP_STATS.ASSISTS
			, MP_STATS.ITEM_0
			, MP_STATS.ITEM_1
			, MP_STATS.ITEM_2
			, MP_STATS.ITEM_3
			, MP_STATS.ITEM_4
			, MP_STATS.ITEM_5
			, MP_STATS.ITEM_6
		FROM SUMMONER_MATCH_INFO SM_INFO
		JOIN SUMMONER_INFO S_I
		ON   SM_INFO.ACCOUNT_ID = S_I.ACCOUNT_ID
		JOIN MATCH_BASIC M_B
		ON   SM_INFO.GAME_ID = M_B.GAME_ID
		JOIN MATCH_PARTICIPANT_INFO MP_INFO
		ON   SM_INFO.GAME_ID = MP_INFO.GAME_ID
		AND  SM_INFO.ACCOUNT_ID = MP_INFO.ACCOUNT_ID
		JOIN MATCH_PARTICIPANT_STATS MP_STATS
		ON   SM_INFO.GAME_ID = MP_STATS.GAME_ID
		AND  MP_STATS.PARTICIPANT_ID = MP_INFO.PARTICIPANT_ID
		JOIN MATCH_PARTICIPANT_BASIC MP_BASIC
		ON   SM_INFO.GAME_ID = MP_BASIC.GAME_ID
		AND  MP_BASIC.PARTICIPANT_ID = MP_INFO.PARTICIPANT_ID
		ORDER BY SM_INFO.GAME_ID
	</select>

</mapper>
